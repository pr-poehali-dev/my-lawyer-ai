-- Создание таблицы для хранения законодательных актов
CREATE TABLE IF NOT EXISTS legal_documents (
    id SERIAL PRIMARY KEY,
    code_name VARCHAR(50) NOT NULL,
    full_name TEXT NOT NULL,
    article_number VARCHAR(20) NOT NULL,
    article_title TEXT,
    article_text TEXT NOT NULL,
    part_number VARCHAR(10),
    chapter_number VARCHAR(10),
    section_name TEXT,
    last_updated DATE,
    source_url TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создание индекса для быстрого поиска по кодексам и статьям
CREATE INDEX idx_legal_documents_code ON legal_documents(code_name);
CREATE INDEX idx_legal_documents_article ON legal_documents(article_number);
CREATE INDEX idx_legal_documents_search ON legal_documents USING gin(to_tsvector('russian', article_text));

-- Вставка основных статей Гражданского кодекса РФ
INSERT INTO legal_documents (code_name, full_name, article_number, article_title, article_text, source_url) VALUES
('ГК РФ', 'Гражданский кодекс Российской Федерации', '1', 'Основные начала гражданского законодательства', 'Гражданское законодательство основывается на признании равенства участников регулируемых им отношений, неприкосновенности собственности, свободы договора, недопустимости произвольного вмешательства кого-либо в частные дела, необходимости беспрепятственного осуществления гражданских прав, обеспечения восстановления нарушенных прав, их судебной защиты.', 'http://www.consultant.ru/document/cons_doc_LAW_5142/'),
('ГК РФ', 'Гражданский кодекс Российской Федерации', '10', 'Защита гражданских прав', 'Защита гражданских прав осуществляется путем: признания права; восстановления положения, существовавшего до нарушения права; признания оспоримой сделки недействительной; присуждения к исполнению обязанности в натуре; возмещения убытков; взыскания неустойки; компенсации морального вреда; прекращения или изменения правоотношения; неприменения судом акта государственного органа или органа местного самоуправления, противоречащего закону.', 'http://www.consultant.ru/document/cons_doc_LAW_5142/'),
('ГК РФ', 'Гражданский кодекс Российской Федерации', '15', 'Возмещение убытков', 'Лицо, право которого нарушено, может требовать полного возмещения причиненных ему убытков, если законом или договором не предусмотрено возмещение убытков в меньшем размере. Под убытками понимаются расходы, которые лицо произвело или должно будет произвести для восстановления нарушенного права, утрата или повреждение его имущества (реальный ущерб), а также неполученные доходы (упущенная выгода).', 'http://www.consultant.ru/document/cons_doc_LAW_5142/'),
('ГК РФ', 'Гражданский кодекс Российской Федерации', '309', 'Общие положения', 'Обязательства должны исполняться надлежащим образом в соответствии с условиями обязательства и требованиями закона.', 'http://www.consultant.ru/document/cons_doc_LAW_5142/'),
('ГК РФ', 'Гражданский кодекс Российской Федерации', '310', 'Недопустимость одностороннего отказа от исполнения обязательства', 'Односторонний отказ от исполнения обязательства не допускается, за исключением случаев, предусмотренных настоящим Кодексом, другими законами или иными правовыми актами.', 'http://www.consultant.ru/document/cons_doc_LAW_5142/');

-- Вставка статей Трудового кодекса РФ
INSERT INTO legal_documents (code_name, full_name, article_number, article_title, article_text, source_url) VALUES
('ТК РФ', 'Трудовой кодекс Российской Федерации', '21', 'Основные права и обязанности работника', 'Работник имеет право на: заключение, изменение и расторжение трудового договора; предоставление ему работы; рабочее место; своевременную и в полном объеме выплату заработной платы; отдых; полную достоверную информацию об условиях труда; профессиональную подготовку; объединение; защиту своих трудовых прав; разрешение индивидуальных и коллективных трудовых споров; возмещение вреда, причиненного в связи с исполнением трудовых обязанностей; обязательное социальное страхование.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/'),
('ТК РФ', 'Трудовой кодекс Российской Федерации', '22', 'Основные права и обязанности работодателя', 'Работодатель имеет право: заключать, изменять и расторгать трудовые договоры; вести коллективные переговоры; поощрять работников; требовать от работников исполнения трудовых обязанностей; привлекать работников к дисциплинарной и материальной ответственности; принимать локальные нормативные акты.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/'),
('ТК РФ', 'Трудовой кодекс Российской Федерации', '80', 'Расторжение трудового договора по инициативе работника (по собственному желанию)', 'Работник имеет право расторгнуть трудовой договор, предупредив об этом работодателя в письменной форме не позднее чем за две недели. По соглашению между работником и работодателем трудовой договор может быть расторгнут и до истечения срока предупреждения об увольнении.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/'),
('ТК РФ', 'Трудовой кодекс Российской Федерации', '127', 'Реализация права на отпуск при увольнении работника', 'При увольнении работнику выплачивается денежная компенсация за все неиспользованные отпуска.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/'),
('ТК РФ', 'Трудовой кодекс Российской Федерации', '140', 'Сроки расчета при увольнении', 'При прекращении трудового договора выплата всех сумм, причитающихся работнику от работодателя, производится в день увольнения работника. Если работник в день увольнения не работал, то соответствующие суммы должны быть выплачены не позднее следующего дня после предъявления уволенным работником требования о расчете.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/'),
('ТК РФ', 'Трудовой кодекс Российской Федерации', '236', 'Материальная ответственность работодателя за задержку выплаты заработной платы', 'При нарушении работодателем установленного срока выплаты заработной платы работодатель обязан выплатить их с уплатой процентов (денежной компенсации) в размере не ниже одной сто пятидесятой действующей в это время ключевой ставки Центрального банка Российской Федерации от не выплаченных в срок сумм за каждый день задержки.', 'http://www.consultant.ru/document/cons_doc_LAW_34683/');